:ruby
  tutorials_mock2()
  tid = params[:tutorial_id]
  @tutorial = @tutorials.select{|t| t.id == tid}[0]

  num = params[:num].to_i
  steps = @tutorial.steps
  step = steps[num - 1]

  imgs = step[:imgs]
  video = step[:video]

  has_imgs = imgs.present?
  has_video = video.present?

.step
  .detail.col-phone-12
    .num
      %span.current= num
      %span /
      %span.total= steps.count

    .icons
      - if has_imgs
        .icon.with-imgs
          %i.fa.fa-image
      - if has_video
        .icon.with-video
          %i.fa.fa-video-camera

    - if has_video
      .row
        .video
          .box
            %video{:src => video, :controls => true, :width => '100%', :height => '100%'}

    .title= step[:title]
    .desc= step[:desc]

    - if has_imgs
      .imgs
        - imgs.each do |img|
          .img
            .box
              .box1= fit_image img, :width => '100%', :height => '100%'

  .note
    .link
      %a{:href => 'javascript:;'}
        %i.fa.fa-pencil

  :coffee
    jQuery(document).on 'ready page:load', ->
      jQuery('.note .link a').click ->
        $o = jQuery('.note-overlay')
        if $o.is(":visible")
          $o.slideUp(100)
        else
          $o.slideDown(100)

  .note-overlay{:style => 'display:none;'}
    .level-select
      .l.easy
        %i.fa.fa-smile-o
        %span 很容易，很快就掌握了
      .l.normal
        %i.fa.fa-meh-o
        %span 一般般
      .l.hard
        %i.fa.fa-frown-o
        %span 比较难，需要多用心

    .note-input
      .di 把你的心得体会记录下来



  .control
    .prev
      :ruby
        href, klass = case num
          when 1
            ["/explore/tutorials/#{@tutorial.id}", 'cover']
          else
            ["/explore/tutorials/#{@tutorial.id}/steps/#{num - 1}", '']
          end

      %a{:href => href, :class => klass}
        %i.fa.fa-chevron-left


    .next
      :ruby
        href, klass = case num
          when steps.length
            ["/explore/tutorials/#{@tutorial.id}/steps/finish", '']
          else
            ["/explore/tutorials/#{@tutorial.id}/steps/#{num + 1}", '']
          end

      %a{:href => href, :class => klass}
        %i.fa.fa-chevron-right