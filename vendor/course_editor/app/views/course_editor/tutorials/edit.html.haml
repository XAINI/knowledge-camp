:ruby
  step_url_prefix = url_for([:root]) + 'steps/'

.step-template{:style => 'display:none;'}
  .step
    .text
    .hoverdiv
    %a.delete{:title => '删除此页面'}
      %i.fa.fa-times

.editor{:data => {:'create-url' => url_for([@tutorial, :steps]), :'step-url-prefix' => step_url_prefix}}
  .top-bar
    .new-step
      %a.create.btn.btn-rounded.btn-bdb-fresh.btn-large{:href => 'javascript:;'}
        %i.fa.fa-plus
        %span 增加一个页面
    .steps-count
      %span> 目前的页面总数：
      %span.count>= @tutorial.steps.count
      %span> ，读者无法访问的页面数：
      %span.cant-reach-count> 0

  .steps
    - @tutorial.steps.each_with_index do |step, i|
      .step{:class => (i == 0 ? 'begin' : ''), :style => 'display:none', :data => {:id => step.id, :'continue-json' => step.continue.to_json, :title => step.title}}
        .text
        .hoverdiv
        %a.delete{:title => '删除此页面'}
          %i.fa.fa-times

.overlay{:style => 'display:none;'}
  .step-form
    .header
      %a.close.btn.btn-rounded.btn-bdb-night{:href => 'javascript:;'}
        %span 关闭

    .title-ipter
      %input.form-control{:name => :title, :type => :text, :placeholder => '输入页面标题'}

    .content-ipter
      .content-container
        .scroller
          .blocks

        .opps
          .add
            %i.fa.fa-plus
            %span 添加内容
          .assigns
            .assign-continue
              %i.fa.fa-level-down
              %span 指定后续
            .assign-continue-hover
              .item.another-step
                %i.fa.fa-file-o
                %span 指定页面
              .item.branch
                %i.fa.fa-sitemap
                %span 设置分支
          .current-continue.end
            .wrapper
              %span 当前设置：
              
              %span.end 无后续
              
              %span.step 指定页面
              %span.step.text ...
              %span.step.edit
                %i.fa.fa-pencil
              %span.step.cancel
                %i.fa.fa-times

              %span.select.text 选择分支
              %span.select.edit
                %i.fa.fa-pencil
              %span.select.cancel
                %i.fa.fa-times

  .subform.continue-page-assigner{:style => 'display:none;'}
    .main-area
      .template{:style => 'display:none;'}
        .step
          .text
      .list
    .btns
      .bbox
        %a.ok.btn.btn-rounded.btn-bdb-fresh.btn-large{:href => 'javascript:;'}
          %span 确定
      .bbox
        %a.cancel.btn.btn-rounded.btn-bdb.btn-large{:href => 'javascript:;'}
          %span 取消

  .subform.branch-assigner{:style => 'display:none;'}
    .main-area
      .template{:style => 'display:none;'}
        .option
          %textarea.form-control{:name => :question, :type => :text, :rows => 2, :placeholder => '输入选项'}
          .ops
            .assign-q-step
              %i.fa.fa-cog 
              %span 指定对应页面
            .current 尚未指定
            .delete
              %i.fa.fa-times

      .question
        %textarea.form-control{:name => :question, :type => :text, :rows => 2, :placeholder => '输入问题'}
      .options

      .add
        .add-option
          %i.fa.fa-plus
          %span 增加选项

    .btns
      .bbox
        %a.ok.btn.btn-rounded.btn-bdb-fresh.btn-large{:href => 'javascript:;'}
          %span 确定
      .bbox
        %a.cancel.btn.btn-rounded.btn-bdb.btn-large{:href => 'javascript:;'}
          %span 取消

  .subform.option-assigner{:style => 'display:none;'}
    .main-area
      .template{:style => 'display:none;'}
        .step
          .text
      .list
    .btns
      .bbox
        %a.ok.btn.btn-rounded.btn-bdb-fresh.btn-large{:href => 'javascript:;'}
          %span 确定
      .bbox
        %a.cancel.btn.btn-rounded.btn-bdb.btn-large{:href => 'javascript:;'}
          %span 取消